<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-store" />
    
    <title>PANGEOS-MX</title>
    
    {% load static %}
    <link rel="icon" href="{% static 'vendors/pangeos/production/images/favicon.ico' %}" type="image/ico" />
    <!-- Bootstrap -->
    <link href="{% static 'vendors/bootstrap/dist/css/bootstrap.min.css' %}" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="{% static 'vendors/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet">
    <!-- NProgress -->
    <link href="{% static 'vendors/nprogress/nprogress.css' %}" rel="stylesheet">
    <!-- iCheck -->
    <link href="{% static 'vendors/iCheck/skins/flat/green.css' %}" rel="stylesheet">
	
    <!-- bootstrap-progressbar -->
    <link href="{% static 'vendors/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css' %}" rel="stylesheet">
    <!-- JQVMap -->
    <link href="{% static 'vendors/jqvmap/dist/jqvmap.min.css' %}" rel="stylesheet"/>
    <!-- bootstrap-daterangepicker -->
    <link href="{% static 'vendors/bootstrap-daterangepicker/daterangepicker.css' %}" rel="stylesheet">
    
    <!-- bootstrap-multiselect -->
    <link rel="stylesheet" href="{% static 'vendors/pangeos/build/css/jquery-multiple-select/bootstrap-multiselect.css' %}" type="text/css">

    <!-- Custom Theme Style -->
    <link href="{% static 'vendors/pangeos/build/css/custom.css' %}" rel="stylesheet">


    <link href="{% static 'vendors/pangeos/css/pangeos.css' %}" rel="stylesheet">

    <!-- Own styles -->
    <link href="{% static 'src/css/style.css' %}" rel="stylesheet">

    
    
    {% block head %}

    {% endblock %}
</head>
<body class="nav-md">
              <div id="loadingmodalbackground">
                <div class="loader"></div>
              </div>
            <!-- <div id="fullScreen">
                <span><i class="fa fa-arrows-alt"></i></span>
            </div> -->
    {% if perfil %}
        <script>
            let per = String("{{ perfil }}");
            localStorage.setItem('perfil', per);
            alert("Local:"+per);
        </script>
    {% endif %}
    <div class="container body">
        <div class="main_container">
            <!-- top navigation -->
            {% include 'admin_sistema/header.html' %}
            <!-- /top navigation -->

            <!-- page content -->
            {% block content %}
            {% endblock %}
            <!-- /page content -->
            
            {% include 'admin_sistema/footer.html' %}
        </div>
    </div>
    
    <!-- jQuery -->
    <script src="{% static 'vendors/jquery/dist/jquery.min.js' %}"></script>
    <script>
    $(document).ready(function(){
        $(".elem-admin").hide();

        $("li.menulist a").on("click", function(){
            $("li.menulist a").removeClass("active");
            $(this).addClass("active");
        });
        var name_data = "{{ name|safe }}";
        var span_name_text = $("#span_name").text();
        if (localStorage.getItem("name") === null) { // No existe la llave name en local storage
            if( name_data == ""){
                console.log("key name not exist and name data is empty.");
                //localStorage.removeItem('name');
            }else{
                console.log("key name not exist and name data exist.");
                console.log("name_data: " + name_data);
                localStorage.setItem('name', name_data);
            }
        }else{
            console.log("key name exist");
            console.log("LocalStorage: " + localStorage.getItem("name"));
            if(localStorage.getItem("name") != ""){
                $("#span_name").text(localStorage.getItem("name"));
            }
            if( name_data == ""){
                console.log("name is empty");
            }else{
                console.log("name exist");
                console.log("name_data: " + name_data);
                localStorage.setItem('name', name_data);
                if(span_name_text == "")
                    $("#span_name").text(name_data);
            }
        }

        if(name_data == ""  && span_name_text == "")
            localStorage.removeItem('name');

        $("#a_salir").click(function(){
            localStorage.removeItem('name');
            console.log("Salir - remove");
        });

        let perfil = String(localStorage.getItem("perfil"));
        if ( perfil === null){  // No existe la llave perfil en local storage
            $(".elem-admin").hide();
        }else if( perfil === "ADMINISTRADOR"){
            $(".elem-admin").show();
        }else{
            $(".elem-admin").hide();
        }
    });
    </script>
    {% block script %}

    {% endblock %}
    <script type="text/javascript" src="{% static 'vendors/pangeos/pangeos.js' %}"></script>
    
</body>
</html>